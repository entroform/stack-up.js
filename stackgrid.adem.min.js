!function(){return this.Stackgrid=function(){var t,e,n,i,o;return i={height:0,width:0},(i.update=function(){return o&&o.config.viewport&&1===o.config.viewport.nodeType?(i.height=o.config.viewport.offsetHeight,i.width=o.config.viewport.offsetWidth):(i.height=window.innerHeight,i.width=window.innerWidth)})(),n={debounceTimeout:void 0,complete:function(){},debounce:function(t,e){clearTimeout(this.debounceTimeout),this.debounceTimeout=window.setTimeout(t,e)},handler:function(){i.update(),n.debounce(n.complete,o.config.resizeDebounceDelay)}},t={$container:void 0,$items:void 0,containerHeight:0,containerWidth:0,items:[],numberOfColumns:0,updateSelectors:function(){},appendItem:function(){},populateItems:function(){},calculateNumberOfColumns:function(){},updateNumberOfColumns:function(){}},t.updateSelectors=function(){this.$container=document.querySelector(o.config.containerSelector),this.$items=document.querySelectorAll(o.config.containerSelector+" > "+o.config.itemsSelector)},t.appendItem=function(t){t.style.width=o.config.columnWidth+"px",this.items.push([t,t.offsetHeight,0,0])},t.populateItems=function(){var t,e,n,i,o;for(this.items=[],o=this.$items,t=n=0,i=o.length;i>n;t=++n)e=o[t],this.appendItem(e)},t.calculateNumberOfColumns=function(){var t;return t=o.config.isFluid?Math.floor((i.width-o.config.gutter)/(o.config.columnWidth+o.config.gutter)):o.config.numberOfColumns,t>this.items.length&&(t=this.items.length),this.items.length&&0>=t&&(t=1),t},t.updateNumberOfColumns=function(){this.numberOfColumns=this.calculateNumberOfColumns()},t.layout=function(){e[o.config.layout].setup(),this.items.length&&e[o.config.layout].loop()},t.draw=function(){var t,e;this.containerWidth=(o.config.columnWidth+o.config.gutter)*this.numberOfColumns,t=this.containerHeight+o.config.gutter,e=this.containerWidth+o.config.gutter,o.config.scaleContainer(this.$container,e,t,function(t){return function(){var e,n,i,u,c,r,s;for(e=function(){},r=t.items,s=[],n=u=0,c=r.length;c>u;n=++u)i=r[n],s.push(o.config.moveItem(i[0],i[2],i[3],e));return s}}(this))},e={columnPointer:0,ordinal:{stack:[],setup:function(){var e;this.stack=function(){var n,i,o,u;for(u=[],e=n=0,i=t.numberOfColumns-1;i>=0?i>=n:n>=i;e=i>=0?++n:--n)u.push((o=0,e=o[0],o));return u}()},plot:function(n){t.items[n][2]=o.config.gutter+(o.config.columnWidth+o.config.gutter)*e.columnPointer,t.items[n][3]=o.config.gutter+this.stack[e.columnPointer],this.stack[e.columnPointer]+=t.items[n][1]+o.config.gutter,this.stack[e.columnPointer]>t.containerHeight&&(t.containerHeight=this.stack[e.columnPointer]),e.columnPointer++,e.columnPointer>=t.numberOfColumns&&(e.columnPointer=0)},loop:function(){var e,n,i;for(e=n=0,i=t.items.length-1;i>=0?i>=n:n>=i;e=i>=0?++n:--n)this.plot(e)}},optimized:{stack:[],setup:function(){var e;this.stack=function(){var n,i,o,u;for(u=[],e=n=0,i=t.numberOfColumns-1;i>=0?i>=n:n>=i;e=i>=0?++n:--n)u.push((o=[e,0],e=o[0],o));return u}()},plot:function(n){t.items[n][2]=o.config.gutter+(o.config.columnWidth+o.config.gutter)*this.stack[0][0],t.items[n][3]=o.config.gutter+this.stack[0][1],this.stack[0][1]+=t.items[n][1]+o.config.gutter,this.stack[0][1]>t.containerHeight&&(t.containerHeight=this.stack[0][1]),this.stack.sort(function(t,e){return t[1]-e[1]}),e.columnPointer++,e.columnPointer>=t.numberOfColumns&&(e.columnPointer=0)},loop:function(){var e,n,i;for(e=n=0,i=t.items.length-1;i>=0?i>=n:n>=i;e=i>=0?++n:--n)this.plot(e)}}},e.reset=function(){t.containerHeight=0,this.columnPointer=0},o={config:{containerSelector:void 0,itemsSelector:void 0,columnWidth:320,gutter:20,isFluid:!1,layout:"ordinal",numberOfColumns:4,resizeDebounceDelay:350}},o.config.moveItem=function(t,e,n,i){t.style.left=e+"px",t.style.top=n+"px",i()},o.config.scaleContainer=function(t,e,n,i){t.style.height=n+"px",t.style.width=e+"px",i()},n.complete=function(){t.calculateNumberOfColumns()!==t.numberOfColumns&&o.config.isFluid&&o.restack()},o.initialize=function(e,i){window.addEventListener("resize",n.handler),this.config.containerSelector=e,this.config.itemsSelector=i,t.updateSelectors(),t.populateItems(),t.updateNumberOfColumns(),t.layout(),t.draw()},o.reset=function(){t.container={width:0,height:0},t.items=[],t.updateSelectors(),t.populateItems(),e.reset(),this.restack()},o.append=function(n,i){var u;u=t.items.length,t.appendItem(n),t.calculateNumberOfColumns()===t.numberOfColumns?(e[o.config.layout].plot(u),t.draw()):this.restack()},o.restack=function(){t.updateNumberOfColumns(),e.reset(),t.layout(),t.draw()},o}}();